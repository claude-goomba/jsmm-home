<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Insane Jump - JSMM Games</title>
  <style>
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #fff;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
    }

    #gameContainer {
      background: rgba(35, 43, 58, 0.8);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
      text-align: center;
      max-width: 900px;
    }

    h1 {
      color: #efc050;
      font-size: 3em;
      margin: 0 0 10px 0;
      text-shadow: 0 0 20px rgba(239, 192, 80, 0.6);
    }

    .subtitle {
      color: #45b8ac;
      font-size: 1.2em;
      margin-bottom: 20px;
    }

    #gameCanvas {
      background: linear-gradient(180deg, #87ceeb 0%, #4a9eff 100%);
      border-radius: 12px;
      display: block;
      margin: 20px auto;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
      cursor: crosshair;
    }

    .stats {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
      font-size: 1.3em;
      gap: 30px;
    }

    .stat {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px 30px;
      border-radius: 12px;
      border: 2px solid #efc050;
      flex: 1;
    }

    .stat-label {
      color: #b3b3b3;
      font-size: 0.8em;
    }

    .stat-value {
      color: #efc050;
      font-size: 1.5em;
      font-weight: bold;
    }

    .controls {
      background: rgba(0, 0, 0, 0.3);
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      text-align: left;
    }

    .controls h3 {
      color: #efc050;
      margin-top: 0;
    }

    .controls p {
      color: #b3b3b3;
      margin: 8px 0;
      font-size: 1.1em;
    }

    .key {
      display: inline-block;
      background: #45b8ac;
      color: #fff;
      padding: 5px 12px;
      border-radius: 6px;
      font-weight: bold;
      margin: 0 5px;
    }

    button {
      background: linear-gradient(135deg, #efc050, #ff9800);
      color: #fff;
      border: none;
      padding: 15px 40px;
      border-radius: 10px;
      font-size: 1.2em;
      font-weight: bold;
      cursor: pointer;
      margin: 10px;
      box-shadow: 0 4px 16px rgba(239, 192, 80, 0.4);
      transition: all 0.3s ease;
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(239, 192, 80, 0.6);
    }

    button:active {
      transform: translateY(-1px);
    }

    #gameOver {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .gameOverContent {
      background: rgba(35, 43, 58, 0.95);
      padding: 50px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.8);
      border: 3px solid #efc050;
    }

    .gameOverContent h2 {
      color: #efc050;
      font-size: 3em;
      margin: 0 0 20px 0;
    }

    .gameOverContent p {
      color: #b3b3b3;
      font-size: 1.5em;
      margin: 10px 0;
    }

    .power-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(239, 192, 80, 0.95);
      color: #1a1a2e;
      padding: 20px 40px;
      border-radius: 15px;
      font-size: 2em;
      font-weight: bold;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 999;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
    }

    .power-popup.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <h1>ðŸŽ¾ Insane Jump Tennis</h1>
    <p class="subtitle">Smash your way to victory!</p>

    <div class="stats">
      <div class="stat">
        <div class="stat-label">Score</div>
        <div class="stat-value" id="score">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Best Rally</div>
        <div class="stat-value" id="bestRally">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Speed</div>
        <div class="stat-value" id="speed">1x</div>
      </div>
    </div>

    <canvas id="gameCanvas" width="800" height="600"></canvas>

    <div class="controls">
      <h3>Controls</h3>
      <p><span class="key">MOUSE</span> Move paddle left and right</p>
      <p><span class="key">CLICK</span> Power shot / Start game</p>
      <p><span class="key">SPACE</span> Jump for aerial shots</p>
    </div>

    <div>
      <button onclick="resetGame()">Restart Game</button>
      <a href="index.html" style="text-decoration: none;"><button>Back to Home</button></a>
    </div>
  </div>

  <div id="gameOver">
    <div class="gameOverContent">
      <h2>Game Over!</h2>
      <p>Final Score: <span id="finalScore">0</span></p>
      <p>Best Rally: <span id="finalBestRally">0</span></p>
      <button onclick="resetGame()">Play Again</button>
    </div>
  </div>

  <div class="power-popup" id="powerPopup"></div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Game state
    let game = {
      running: false,
      score: 0,
      rally: 0,
      bestRally: 0,
      speed: 1,
      mouseX: canvas.width / 2,
      mouseY: canvas.height - 50,
      player: {
        x: canvas.width / 2,
        y: canvas.height - 100,
        width: 80,
        height: 100,
        velocityY: 0,
        jumping: false,
        racketAngle: 0
      },
      ball: {
        x: canvas.width / 2,
        y: 100,
        radius: 12,
        velocityX: 0,
        velocityY: 0,
        active: false,
        trail: []
      },
      opponent: {
        x: canvas.width / 2,
        y: 80,
        width: 80,
        height: 100,
        targetX: canvas.width / 2
      },
      particles: [],
      powerShot: false,
      lastHit: null
    };

    // Mouse controls
    canvas.addEventListener('mousemove', (e) => {
      const rect = canvas.getBoundingClientRect();
      game.mouseX = e.clientX - rect.left;
      game.mouseY = e.clientY - rect.top;
    });

    canvas.addEventListener('click', (e) => {
      if (!game.running) {
        startGame();
      } else {
        game.powerShot = true;
        setTimeout(() => { game.powerShot = false; }, 300);
      }
    });

    // Keyboard controls
    document.addEventListener('keydown', (e) => {
      if (e.key === ' ') {
        e.preventDefault();
        if (!game.running) {
          startGame();
        } else if (!game.player.jumping) {
          game.player.jumping = true;
          game.player.velocityY = -18;
        }
      }
    });

    // Create particles
    function createParticles(x, y, color, count = 15) {
      for (let i = 0; i < count; i++) {
        game.particles.push({
          x: x,
          y: y,
          vx: (Math.random() - 0.5) * 8,
          vy: (Math.random() - 0.5) * 8,
          life: 30,
          color: color,
          size: Math.random() * 4 + 2
        });
      }
    }

    // Show power popup
    function showPowerPopup(text) {
      const popup = document.getElementById('powerPopup');
      popup.textContent = text;
      popup.classList.add('show');

      setTimeout(() => {
        popup.classList.remove('show');
      }, 1000);
    }

    // Update game
    function update() {
      if (!game.running) return;

      // Update player position (follow mouse X)
      const targetX = game.mouseX - game.player.width / 2;
      game.player.x += (targetX - game.player.x) * 0.2;
      game.player.x = Math.max(0, Math.min(canvas.width - game.player.width, game.player.x));

      // Update player jump
      if (game.player.jumping) {
        game.player.velocityY += 0.8;
        game.player.y += game.player.velocityY;

        if (game.player.y >= canvas.height - 100) {
          game.player.y = canvas.height - 100;
          game.player.jumping = false;
          game.player.velocityY = 0;
        }
      }

      // Calculate racket angle based on movement
      const dx = game.player.x - (game.player.prevX || game.player.x);
      game.player.racketAngle = dx * 0.05;
      game.player.prevX = game.player.x;

      // Update ball
      if (game.ball.active) {
        game.ball.x += game.ball.velocityX;
        game.ball.y += game.ball.velocityY;

        // Ball trail effect
        game.ball.trail.push({ x: game.ball.x, y: game.ball.y });
        if (game.ball.trail.length > 10) {
          game.ball.trail.shift();
        }

        // Ball gravity and air resistance
        game.ball.velocityY += 0.3;

        // Wall collision
        if (game.ball.x - game.ball.radius < 0 || game.ball.x + game.ball.radius > canvas.width) {
          game.ball.velocityX *= -0.8;
          game.ball.x = game.ball.x < canvas.width / 2 ? game.ball.radius : canvas.width - game.ball.radius;
          createParticles(game.ball.x, game.ball.y, '#fff', 8);
        }

        // Player collision (racket)
        const playerRacketY = game.player.y - 20;
        const playerRacketX = game.player.x + game.player.width / 2;

        if (game.ball.y + game.ball.radius > playerRacketY &&
            game.ball.y - game.ball.radius < playerRacketY + 20 &&
            game.ball.x > game.player.x - 20 &&
            game.ball.x < game.player.x + game.player.width + 20 &&
            game.lastHit !== 'player') {

          // Hit the ball back
          const hitAngle = (game.ball.x - playerRacketX) / 80;
          const power = game.powerShot ? 1.5 : 1;
          game.ball.velocityX = hitAngle * 8 * power;
          game.ball.velocityY = -12 * game.speed * power;
          game.ball.y = playerRacketY - game.ball.radius;
          game.lastHit = 'player';
          game.rally++;

          // Score and effects
          const points = Math.floor(10 * game.speed * power);
          game.score += points;

          if (game.powerShot) {
            createParticles(game.ball.x, game.ball.y, '#efc050', 20);
            showPowerPopup('POWER SHOT! +' + points);
          } else {
            createParticles(game.ball.x, game.ball.y, '#45b8ac', 15);
          }

          // Increase speed every 5 hits
          if (game.rally % 5 === 0) {
            game.speed += 0.1;
            showPowerPopup('SPEED UP!');
          }

          if (game.rally > game.bestRally) {
            game.bestRally = game.rally;
          }
        }

        // Opponent AI
        game.opponent.targetX = game.ball.x - game.opponent.width / 2;
        game.opponent.x += (game.opponent.targetX - game.opponent.x) * 0.15;
        game.opponent.x = Math.max(0, Math.min(canvas.width - game.opponent.width, game.opponent.x));

        // Opponent collision
        const opponentRacketY = game.opponent.y + game.opponent.height + 20;
        const opponentRacketX = game.opponent.x + game.opponent.width / 2;

        if (game.ball.y - game.ball.radius < opponentRacketY &&
            game.ball.y + game.ball.radius > opponentRacketY - 20 &&
            game.ball.x > game.opponent.x - 20 &&
            game.ball.x < game.opponent.x + game.opponent.width + 20 &&
            game.lastHit !== 'opponent') {

          const hitAngle = (game.ball.x - opponentRacketX) / 80;
          game.ball.velocityX = hitAngle * 6;
          game.ball.velocityY = 10 * game.speed;
          game.ball.y = opponentRacketY + game.ball.radius;
          game.lastHit = 'opponent';
          createParticles(game.ball.x, game.ball.y, '#ff6b6b', 12);
        }

        // Ball out of bounds (bottom)
        if (game.ball.y > canvas.height + 50) {
          gameOver();
        }

        // Ball out of bounds (top)
        if (game.ball.y < -50) {
          game.rally = 0;
          serveBall();
        }
      }

      // Update particles
      game.particles.forEach((p, i) => {
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.2;
        p.life--;
        if (p.life <= 0) {
          game.particles.splice(i, 1);
        }
      });

      updateUI();
    }

    // Draw game
    function draw() {
      // Clear canvas with gradient
      const skyGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);
      skyGrad.addColorStop(0, '#87ceeb');
      skyGrad.addColorStop(1, '#4a9eff');
      ctx.fillStyle = skyGrad;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Draw court
      ctx.fillStyle = '#2d8b57';
      ctx.fillRect(0, canvas.height - 150, canvas.width, 150);

      // Court lines
      ctx.strokeStyle = '#fff';
      ctx.lineWidth = 4;
      ctx.beginPath();
      ctx.moveTo(0, canvas.height - 150);
      ctx.lineTo(canvas.width, canvas.height - 150);
      ctx.stroke();

      // Net
      ctx.strokeStyle = '#333';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(0, canvas.height / 2);
      ctx.lineTo(canvas.width, canvas.height / 2);
      ctx.stroke();

      // Net posts
      ctx.fillStyle = '#666';
      ctx.fillRect(-5, canvas.height / 2 - 50, 10, 50);
      ctx.fillRect(canvas.width - 5, canvas.height / 2 - 50, 10, 50);

      // Draw opponent (top)
      ctx.save();
      ctx.translate(game.opponent.x + game.opponent.width / 2, game.opponent.y + game.opponent.height / 2);

      // Opponent body
      ctx.fillStyle = '#ff6b6b';
      ctx.fillRect(-25, -35, 50, 60);

      // Head
      ctx.fillStyle = '#ffdbac';
      ctx.beginPath();
      ctx.arc(0, -50, 18, 0, Math.PI * 2);
      ctx.fill();

      // Racket
      ctx.strokeStyle = '#8b4513';
      ctx.lineWidth = 6;
      ctx.beginPath();
      ctx.moveTo(30, -20);
      ctx.lineTo(50, -10);
      ctx.stroke();

      // Racket head
      ctx.strokeStyle = '#efc050';
      ctx.lineWidth = 4;
      ctx.beginPath();
      ctx.arc(50, -10, 15, 0, Math.PI * 2);
      ctx.stroke();

      // Strings
      ctx.strokeStyle = '#efc050';
      ctx.lineWidth = 1;
      for (let i = -10; i <= 10; i += 5) {
        ctx.beginPath();
        ctx.moveTo(50 + i, -25);
        ctx.lineTo(50 + i, 5);
        ctx.stroke();
      }

      ctx.restore();

      // Draw player (bottom) - MUCH LARGER AND MORE VISIBLE
      ctx.save();
      ctx.translate(game.player.x + game.player.width / 2, game.player.y + game.player.height / 2);

      // Player body (bright color)
      ctx.fillStyle = '#45b8ac';
      ctx.fillRect(-30, -40, 60, 70);

      // Head (larger)
      ctx.fillStyle = '#ffdbac';
      ctx.beginPath();
      ctx.arc(0, -60, 22, 0, Math.PI * 2);
      ctx.fill();

      // Eyes
      ctx.fillStyle = '#000';
      ctx.beginPath();
      ctx.arc(-8, -60, 3, 0, Math.PI * 2);
      ctx.arc(8, -60, 3, 0, Math.PI * 2);
      ctx.fill();

      // Smile
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(0, -55, 8, 0, Math.PI);
      ctx.stroke();

      // Arms
      ctx.strokeStyle = '#ffdbac';
      ctx.lineWidth = 8;
      ctx.beginPath();
      ctx.moveTo(-20, -20);
      ctx.lineTo(-35, 0);
      ctx.moveTo(20, -20);
      ctx.lineTo(35, 0);
      ctx.stroke();

      // Legs
      ctx.beginPath();
      ctx.moveTo(-10, 30);
      ctx.lineTo(-15, 50);
      ctx.moveTo(10, 30);
      ctx.lineTo(15, 50);
      ctx.stroke();

      // Racket (with angle)
      ctx.save();
      ctx.rotate(game.player.racketAngle);

      ctx.strokeStyle = '#8b4513';
      ctx.lineWidth = 8;
      ctx.beginPath();
      ctx.moveTo(35, -10);
      ctx.lineTo(60, -20);
      ctx.stroke();

      // Racket head (large and visible)
      ctx.strokeStyle = '#efc050';
      ctx.lineWidth = 6;
      ctx.beginPath();
      ctx.arc(60, -20, 20, 0, Math.PI * 2);
      ctx.stroke();

      // Strings
      ctx.strokeStyle = '#efc050';
      ctx.lineWidth = 2;
      for (let i = -15; i <= 15; i += 5) {
        ctx.beginPath();
        ctx.moveTo(60 + i, -35);
        ctx.lineTo(60 + i, -5);
        ctx.stroke();
      }
      for (let i = -15; i <= 15; i += 5) {
        ctx.beginPath();
        ctx.moveTo(45, -20 + i);
        ctx.lineTo(75, -20 + i);
        ctx.stroke();
      }

      ctx.restore();
      ctx.restore();

      // Draw ball trail
      if (game.ball.active) {
        game.ball.trail.forEach((pos, i) => {
          ctx.globalAlpha = i / game.ball.trail.length * 0.5;
          ctx.fillStyle = '#ffeb3b';
          ctx.beginPath();
          ctx.arc(pos.x, pos.y, game.ball.radius * 0.7, 0, Math.PI * 2);
          ctx.fill();
        });
        ctx.globalAlpha = 1;

        // Draw ball (bright and visible)
        ctx.fillStyle = '#ffeb3b';
        ctx.beginPath();
        ctx.arc(game.ball.x, game.ball.y, game.ball.radius, 0, Math.PI * 2);
        ctx.fill();

        // Ball highlight
        ctx.fillStyle = '#fff';
        ctx.beginPath();
        ctx.arc(game.ball.x - 4, game.ball.y - 4, game.ball.radius * 0.3, 0, Math.PI * 2);
        ctx.fill();

        // Ball outline
        ctx.strokeStyle = '#ffa500';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.arc(game.ball.x, game.ball.y, game.ball.radius, 0, Math.PI * 2);
        ctx.stroke();
      }

      // Draw particles
      game.particles.forEach(p => {
        ctx.fillStyle = p.color;
        ctx.globalAlpha = p.life / 30;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
        ctx.fill();
      });
      ctx.globalAlpha = 1;

      // Power shot indicator
      if (game.powerShot) {
        ctx.strokeStyle = '#efc050';
        ctx.lineWidth = 4;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.arc(game.player.x + game.player.width / 2, game.player.y, 80, 0, Math.PI * 2);
        ctx.stroke();
        ctx.setLineDash([]);
      }
    }

    // Serve ball
    function serveBall() {
      game.ball.x = game.opponent.x + game.opponent.width / 2;
      game.ball.y = game.opponent.y + game.opponent.height + 40;
      game.ball.velocityX = (Math.random() - 0.5) * 4;
      game.ball.velocityY = 8;
      game.ball.active = true;
      game.ball.trail = [];
      game.lastHit = 'opponent';
    }

    // Game loop
    function gameLoop() {
      update();
      draw();
      requestAnimationFrame(gameLoop);
    }

    // Update UI
    function updateUI() {
      document.getElementById('score').textContent = Math.floor(game.score);
      document.getElementById('bestRally').textContent = game.bestRally;
      document.getElementById('speed').textContent = game.speed.toFixed(1) + 'x';
    }

    // Start game
    function startGame() {
      game.running = true;
      game.score = 0;
      game.rally = 0;
      game.bestRally = 0;
      game.speed = 1;
      game.particles = [];
      game.player.y = canvas.height - 100;
      game.player.jumping = false;
      document.getElementById('gameOver').style.display = 'none';
      serveBall();
      updateUI();
    }

    // Game over
    function gameOver() {
      game.running = false;
      game.ball.active = false;
      document.getElementById('finalScore').textContent = Math.floor(game.score);
      document.getElementById('finalBestRally').textContent = game.bestRally;
      document.getElementById('gameOver').style.display = 'flex';
      createParticles(game.ball.x, canvas.height, '#ff0000', 30);
    }

    // Reset game
    function resetGame() {
      startGame();
    }

    // Start game loop
    gameLoop();

    // Instruction on load
    ctx.fillStyle = '#fff';
    ctx.font = 'bold 32px Segoe UI';
    ctx.textAlign = 'center';
    ctx.fillText('Click to Start!', canvas.width / 2, canvas.height / 2);
  </script>
</body>
</html>
